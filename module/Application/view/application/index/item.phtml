<?php 
	$k = $this->item;
	
	if (method_exists($k, "getContent")) {
		$type = "knowledge";
		$text = $k->getContent();
	} else {
		$type = "task";
		$text = $k->getDescription();
	}
	
	$ferrors = $this->formErrors;
	
?>

<div class="wrapp">
	<?php 
	if ($ferrors) 
	{
		echo "<div>" . print_r($ferrors) . "</div>";
	}
	?>

    <div style="margin-bottom:20px;" class="ccbox mainwrapper">
    	<h2>
    	<?php 
    	echo $k->getTechnology()->getName();
    	if (null !== $k->getCompany()) {
			echo " --- " . $k->getCompany()->getName();
		}
    	?>			
    	</h2>
    	
    	<?php 
    			echo '<div class="recommendations-wrapper">';
				echo '<div class="recommendation">';
				
				echo '<p>' . $text . '</p>';
				
				echo '</div></div>';
		?>
		<br>
		
    	<h3>
    	<?php
    	if (null !== $k->getTags()) {
			echo "<h3>Tags</h3>";
    		foreach ($k->getTags() as $t) {
				echo $t->getName() . " ";
			}
    	}
    	?>
    	</h3>
    	
    	<br>
    	<br>
    	
    	<?php 
    	if ($type == "task" && $k->getStatus()) {
    		echo "<form method='post' id='solution-form'>";
	    		echo "<h2><strong>Deine Lösung</strong></h2>";
	    		echo "<textarea name='solution' rows='5' cols='51'></textarea>";
	    		echo "<br>";
	    		echo "<button type='submit' form='solution-form'>Aufgabe abschließen</button>";
	    	echo "</form>";
	    }
	    ?>
    	<br>
    	<br>
    	<?php 
    		echo "<p class='small'>Erstellt am " . $k->getCreated()->format("d.m.Y H:i")
    			. " von <strong>" . $k->getAuthor()->getFullname() .  "</strong></p>"; 
    	?>
    		
    	<?php 
    	if ($k->getUpdated() != $k->getCreated() )
    	{
    		echo "<h3>Zuletzt geändert am " . $k->getUpdated()->format("d.m.Y H:i")
    		. " von <strong>Lars Schröer</strong></h3>";
    	}	
    	?>
    </div>
    
</div>